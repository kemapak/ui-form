uiFormModule=angular.module("uiFormModule",[]),uiFormModule.directive("uiFormInputCheckbox",["$compile","uiFormService","uiFormValidationService",function(e,t,n){return{restrict:"E",transclude:!1,replace:!0,require:"^form",scope:{elementName:"@?",label:"=?",config:"=?",flush:"=?"},template:'<div class="form-group"></div>',link:function(r,i,o,a){"undefined"==typeof r.config&&(r.config={}),"undefined"==typeof r.config.type&&(r.config.type="text"),"undefined"==typeof r.config.isRequired&&(r.config.isRequired=!1),"undefined"==typeof r.elementName&&(r.elementName="elementName_"+Math.random((new Data).getMilliseconds())),"undefined"==typeof r.flush&&(r.flush=!1),"undefined"==typeof r.label&&(r.label="");var l=document.createElement("label"),d=t.getCheckbox({name:r.elementName,ngModel:o.ngModel});d=n.setValidationRules(d,r.config),d=n.setErrorPopover(d),l.appendChild(d),l.appendChild(document.createTextNode(r.label));var u=t.getCheckboxViewMode({label:r.label,ngModel:o.ngModel}),c=t.getWrapperElement({type:r.config.type,layout:r.config.layout}),s=" col-sm-offset-4 col-sm-8";1==r.flush&&(s=" col-sm-12"),c.setAttribute("class",c.getAttribute("class")+s),c.appendChild(l),c.appendChild(u),i.append(c);angular.element(d);e(i.contents())(r.$parent)}}}]),uiFormModule.directive("uiForm",["uiFormService","uiFormValidationService","$compile",function(e,t,n){return{restrict:"E",transclude:!0,replace:!0,controller:function(){},template:"<ng-form novalidate data-ng-transclude></ng-form>",link:function(n,r,i){r.addClass("ui-form"),n.formName=i.name,n.editMode=i.editMode,n.getErrorMessage=function(e){if("undefined"!=typeof this[this.formName][e]){var n=this[this.formName][e];return t.getValidationMessages(n,this.formName,e)}},n.getEditMode=function(){return e.getEditMode(this.editMode)},n.getCheckboxViewClass=function(t){return e.getCheckboxViewClass(t)},r.on("$destroy",function(){})}}}]),uiFormModule.directive("uiFormFieldset",[function(){return{restrict:"E",transclude:!0,replace:!0,require:"^form",template:"<fieldset data-ng-transclude></fieldset>",link:function(e,t,n){if("undefined"!=n.legend){var r=document.createElement("legend");r.appendChild(document.createTextNode(n.legend)),t.append(r)}}}}]),uiFormModule.directive("uiFormInputText",["$compile","uiFormService","uiFormValidationService",function(e,t,n){return{restrict:"E",transclude:!1,replace:!0,require:"^form",scope:{elementName:"@?",label:"=?",config:"=?",flush:"=?"},template:'<div class="form-group"></div>',link:function(r,i,o,a){if("undefined"==typeof r.config&&(r.config={}),"undefined"==typeof r.config.type&&(r.config.type="text"),"undefined"==typeof r.config.isRequired&&(r.config.isRequired=!1),"undefined"==typeof r.elementName&&(r.elementName="elementName_"+Math.random((new Data).getMilliseconds())),"undefined"==typeof r.flush&&(r.flush=!1),0==r.flush&&"undefined"!=typeof r.label){var l=t.getLabel({label:r.label,isRequired:r.config.isRequired});i.append(l)}var d=t.getText({name:r.elementName,type:r.config.type,placeholder:r.config.placeholder,ngModel:o.ngModel});d=n.setValidationRules(d,r.config),d=n.setErrorPopover(d);var u=t.getTextViewMode(o.ngModel),c=t.getWrapperElement({type:r.config.type,layout:r.config.layout});c.appendChild(d),c.appendChild(u);var s=" col-sm-8";(1==r.flush||"undefined"==typeof r.label)&&(s=" col-sm-12"),c.setAttribute("class",c.getAttribute("class")+s),i.append(c);var m=angular.element(d);r.toggleErrorState=function(){a[r.elementName].$dirty&&a[r.elementName].$invalid?i.addClass("has-error"):i.removeClass("has-error")},m.bind("keyup",function(){r.toggleErrorState()}),e(i.contents())(r.$parent)}}}]),uiFormModule.factory("uiFormService",["$parse",function(e){return _supportedInputTextTypes=["text","password","hidden","email","number","date"],_getFormElement=function(e){var t=document.createElement("input");switch(e){case"textarea":t=document.createElement("textarea");case"select":t=document.createElement("select");default:t.setAttribute("type",e)}return t},{getLabel:function(e){var t=document.createElement("label"),n="control-label col-sm-4";if(t.setAttribute("class",n),"undefined"!=typeof e.label&&t.appendChild(document.createTextNode(e.label)),e.isRequired){t.setAttribute("data-ng-required","true");var r=document.createElement("sup"),i=document.createElement("span");i.setAttribute("class","glyphicon glyphicon-asterisk text-danger"),r.appendChild(i),t.appendChild(r)}return t},getText:function(e){var t=_getFormElement(e.type);return t.setAttribute("name",e.name),t.setAttribute("data-ng-model",e.ngModel),t.setAttribute("class","form-control"),"undefined"!=typeof e.placeholder&&t.setAttribute("placeholder",e.placeholder),t},getTextViewMode:function(e){var t=document.createElement("p");return t.setAttribute("class","form-control-static"),t.setAttribute("data-ng-bind",e),t.setAttribute("title","{{"+e+"}}"),t},getTextarea:function(e){var t=_getFormElement("textarea");return t.setAttribute("data-ng-model",e.ngModel),t.setAttribute("class","form-control"),t.setAttribute("placeholder",e.placeholder),t=_setErrorPopover(e.name,t)},getTextareaViewMode:function(e){return this.getTextViewMode(e)},getCheckbox:function(e){var t=_getFormElement("checkbox");return t.setAttribute("name",e.name),t.setAttribute("data-ng-model",e.ngModel),t},getCheckboxViewMode:function(e){var t=document.createElement("p");return t.setAttribute("class","form-control-static"),t.appendChild(document.createTextNode(e.label)),t.setAttribute("title",e.label),t.setAttribute("data-ng-class","getCheckboxViewClass("+e.ngModel+")"),t},getCheckboxViewClass:function(e){var t="";return e||(t="hide"),t},getRadio:function(e,t,n){var r=_getFormElement(e,t,n);return r},getRadioViewMode:function(e){return document.createTextNode("TODO radio view mode")},getSelect:function(e,t,n){var r=_getFormElement(e,t,n);return r},getWrapperElement:function(e){var t=document.createElement("div"),n="";switch(e.type){case"checkbox":n="checkbox","undefined"!=typeof e.layout&&"inline"==e.layout&&(n+="-inline");break;case"radio":n="radio",void 0!==typeof e.layout&&"inline"==e.layout&&(n+="-inline");break;case"input":case"textarea":case"select":}return t.setAttribute("class",n),t},getEditMode:function(e){return"undefined"==typeof e||"false"==e?!1:!0}}}]),uiFormModule.factory("uiFormValidationService",["validationMessages",function(e){var t=e,n=function(e){e.setAttribute("data-ng-required","true")},r=function(e,t){e.setAttribute("data-ng-minlength",t)},i=function(e,t){e.setAttribute("data-ng-maxlength",t)},o=function(e,t){e.setAttribute("min",t)},a=function(e,t){e.setAttribute("max",t)},l=function(e,t){e.setAttribute("data-ng-pattern",t)};return{setValidationRules:function(e,t){return 1==t.isRequired&&n(e),"undefined"!=typeof t.minlength&&t.minlength>0&&r(e,t.minlength),"undefined"!=typeof t.maxlength&&t.maxlength>0&&i(e,t.maxlength),"undefined"!=typeof t.min&&o(e,t.min),"undefined"!=typeof t.max&&a(e,t.max),t.pattern&&l(e,t.pattern),e},setErrorPopover:function(e){return e.setAttribute("data-uib-popover","{{getErrorMessage('"+e.getAttribute("name")+"')}}"),e.setAttribute("data-popover-placement","bottom"),e.setAttribute("data-popover-trigger","focus"),e.setAttribute("data-popover-enable","{{getEditMode()}}"),e},getValidationMessages:function(e,n,r){var i="✔";if("undefined"==typeof e||e.$valid||e.$pristine)return i;if("undefined"==typeof n||"undefined"==typeof r)return i;if("undefined"==typeof document.getElementsByName(n))return i;if("undefined"==typeof document.getElementsByName(r))return i;var o=document.getElementsByName(n)[0].querySelectorAll("*[name="+r+"]");return i="✘",e.$error.required&&(i+=" -"+t.required),e.$error.number&&(i+=" -"+t.number),e.$error["boolean"]&&(i+=" -"+t["boolean"]),e.$error.date&&(i+=" -"+t.date),e.$error.minlength&&(i+=" -"+t.minlength.replace("%1%",o[0].getAttribute("data-ng-minlength"))),e.$error.maxlength&&(i+=" -"+t.maxlength.replace("%1%",o[0].getAttribute("data-ng-maxlength"))),e.$error.min&&(i+=" -"+t.min.replace("%1%",o[0].getAttribute("min"))),e.$error.max&&(i+=" -"+t.max.replace("%1%",o[0].getAttribute("max"))),e.$error.pattern&&(i+=" -"+t.pattern),i}}}]),uiFormModule.value("validationMessages",{required:"This field is required.",number:"This field should be a numeric field.",integer:"This field should be an integer number.","float":"This field should be an float number.",date:"This should be a valid date field.","boolean":"Should be a boolean",minlength:"This field should be at least %1% characters.",maxlength:"This field should be at most %1% characters.",max:"The maximum value for this field is %1%.",min:"The minimum value for this field is %1%.",pattern:"This is an incorrect pattern."});