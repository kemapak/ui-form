uiFormModule=angular.module("uiFormModule",[]),uiFormModule.directive("uiFormInputCheckbox",["uiFormService","uiFormValidationService",function(e,t){return{restrict:"E",transclude:!1,replace:!0,require:"^form",scope:{elementName:"@",model:"=ngModel",label:"=",config:"=",message:"@"},template:'<div class="form-group"></div>',link:function(r,n,i,o){var a=document.createElement("label"),u=e.getCheckbox(r.elementName,i.ngModel,r.config);u=t.setValidationRules(u,r.config),a.appendChild(u),a.appendChild(document.createTextNode(r.label));var l=e.getCheckboxViewMode(r.label,i.ngModel),d=e.getWrapperElement({type:r.config.type,layout:r.config.layout,gridSize:r.config.gridSize});d.appendChild(a),d.appendChild(l),n.append(d);var c=angular.element(u);r.toggleErrorState=function(){o[r.elementName].$dirty&&o[r.elementName].$invalid?n.addClass("has-error"):n.removeClass("has-error")},c.bind("keyup",function(){r.toggleErrorState()})}}}]),uiFormModule.directive("uiForm",["uiFormService","uiFormValidationService","$compile",function(e,t,r){return{restrict:"E",transclude:!0,replace:!0,controller:function(){},template:"<ng-form novalidate data-ng-transclude></ng-form>",link:function(n,i,o){i.addClass("ui-form"),n.formName=o.name,n.editMode=o.editMode,n.getErrorMessage=function(e){if("undefined"!=typeof this[this.formName][e]){var r=this[this.formName][e];return t.getValidationMessages(r,this.formName,e)}},n.getEditMode=function(){return e.getEditMode(this.editMode)},n.getCheckboxViewClass=function(t){return e.getCheckboxViewClass(t)},i.on("$destroy",function(){}),r(i.contents())(n)}}}]),uiFormModule.directive("uiFormFieldset",[function(){return{restrict:"E",transclude:!0,replace:!0,require:"^uiForm",template:"<fieldset data-ng-transclude></fieldset>",link:function(e,t,r){if("undefined"!=r.legend){var n=document.createElement("legend");n.setAttribute("data-ng-bind",r.legend),t.append(n)}}}}]),uiFormModule.directive("uiFormInputText",["uiFormService","uiFormValidationService",function(e,t){return{restrict:"E",transclude:!1,replace:!0,require:"^form",scope:{elementName:"@",model:"=ngModel",label:"=",config:"=",message:"@"},template:'<div class="form-group"></div>',link:function(r,n,i,o){var a=e.getLabel({label:r.label,isRequired:r.config.isRequired,gridSize:r.config.labelGridSize});n.append(a);var u=e.getText(r.elementName,i.ngModel,r.config);u=t.setValidationRules(u,r.config);var l=e.getTextViewMode(i.ngModel),d=e.getWrapperElement({type:r.config.type,layout:r.config.layout,gridSize:r.config.valueGridSize});d.appendChild(u),d.appendChild(l),n.append(d);var c=angular.element(u);r.toggleErrorState=function(){o[r.elementName].$dirty&&o[r.elementName].$invalid?n.addClass("has-error"):n.removeClass("has-error")},c.bind("keyup",function(){r.toggleErrorState()})}}}]),uiFormModule.factory("uiFormService",function(){return _getFormElement=function(e,t,r){var n=document.createElement("input");return n.setAttribute("type",r.type),n.setAttribute("name",e),n.setAttribute("data-ng-model",t),n},_setErrorPopover=function(e,t){return t.setAttribute("data-uib-popover","{{getErrorMessage('"+e+"')}}"),t.setAttribute("data-popover-placement","bottom"),t.setAttribute("data-popover-trigger","focus"),t.setAttribute("data-popover-enable","{{getEditMode()}}"),t},{getLabel:function(e){var t=document.createElement("label"),r="control-label";if("undefined"!=typeof e.gridSize&&(r+=" "+e.gridSize),t.setAttribute("class",r),"undefined"!=typeof e.label&&t.appendChild(document.createTextNode(e.label)),e.isRequired){t.setAttribute("data-ng-required","true");var n=document.createElement("sup"),i=document.createElement("span");i.setAttribute("class","glyphicon glyphicon-asterisk text-danger"),n.appendChild(i),t.appendChild(n)}return t},getText:function(e,t,r){var n=_getFormElement(e,t,r);return n.setAttribute("class","form-control"),n.setAttribute("placeholder",r.placeholder),n=_setErrorPopover(e,n)},getTextViewMode:function(e){var t=document.createElement("p");return t.setAttribute("class","form-control-static"),t.setAttribute("data-ng-bind",e),t.setAttribute("title","{{"+e+"}}"),t},getTextarea:function(e,t,r){var n=_getFormElement(e,t,r);return n.setAttribute("class","form-control"),n.setAttribute("placeholder",r.placeholder),n},getTextareaViewMode:function(e){return this.getTextViewMode(e)},getCheckbox:function(e,t,r){var n=_getFormElement(e,t,r);return n},getCheckboxViewMode:function(e,t){var r=document.createElement("p");return r.setAttribute("class","form-control-static"),r.appendChild(document.createTextNode(e)),r.setAttribute("title","{{"+t+"}}"),r.setAttribute("data-ng-class","getCheckboxViewClass("+t+")"),r},getCheckboxViewClass:function(e){var t="";return e||(t="hide"),t},getRadio:function(e,t,r){var n=_getFormElement(e,t,r);return n},getRadioViewMode:function(e){return document.createTextNode("TODO radio view mode")},getSelect:function(e,t,r){var n=_getFormElement(e,t,r);return n},getWrapperElement:function(e){var t=document.createElement("div"),r="";switch(e.type){case"checkbox":r="checkbox","undefined"!=typeof e.layout&&"inline"==e.layout&&(r+="-inline");break;case"radio":r="radio",void 0!==typeof e.layout&&"inline"==e.layout&&(r+="-inline");break;case"input":case"textarea":case"select":}return t.setAttribute("class",r+" "+e.gridSize),t},getEditMode:function(e){return"undefined"==typeof e||"false"==e?!1:!0}}}),uiFormModule.factory("uiFormValidationService",["$http",function(e){var t={};e.get("validationMessages.bundle.json").then(function(e){t=e.data});var r=function(e){e.setAttribute("data-ng-required","true")},n=function(e,t){e.setAttribute("data-ng-minlength",t)},i=function(e,t){e.setAttribute("data-ng-maxlength",t)},o=function(e,t){e.setAttribute("min",t)},a=function(e,t){e.setAttribute("max",t)},u=function(e,t){e.setAttribute("data-ng-pattern",t)};return{setValidationRules:function(e,t){return 1==t.isRequired&&r(e),"undefined"!=typeof t.minlength&&t.minlength>0&&n(e,t.minlength),"undefined"!=typeof t.maxlength&&t.maxlength>0&&i(e,t.maxlength),"undefined"!=typeof t.min&&o(e,t.min),"undefined"!=typeof t.max&&a(e,t.max),t.pattern&&u(e,t.pattern),e},getValidationMessages:function(e,r,n){var i="✔";if("undefined"==typeof e||e.$valid||e.$pristine)return i;if("undefined"==typeof r||"undefined"==typeof n)return i;if("undefined"==typeof document.getElementsByName(r))return i;if("undefined"==typeof document.getElementsByName(n))return i;var o=document.getElementsByName(r)[0].querySelectorAll("*[name="+n+"]");return i="✘",e.$error.required&&(i+=" -"+t.required),e.$error.number&&(i+=" -"+t.number),e.$error["boolean"]&&(i+=" -"+t["boolean"]),e.$error.date&&(i+=" -"+t.date),e.$error.minlength&&(i+=" -"+t.minlength.replace("%1%",o[0].getAttribute("data-ng-minlength"))),e.$error.maxlength&&(i+=" -"+t.maxlength.replace("%1%",o[0].getAttribute("data-ng-maxlength"))),e.$error.min&&(i+=" -"+t.min.replace("%1%",o[0].getAttribute("min"))),e.$error.max&&(i+=" -"+t.max.replace("%1%",o[0].getAttribute("max"))),e.$error.pattern&&(i+=" -"+t.pattern),i}}}]);