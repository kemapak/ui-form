uiFormModule=angular.module("uiFormModule",[]),uiFormModule.directive("uiFormInputCheckbox",["$compile","uiFormService","uiFormValidationService",function(e,t,r){return{restrict:"E",transclude:!1,replace:!0,require:"^form",scope:{elementName:"@",label:"=",config:"=",message:"@"},template:'<div class="form-group"></div>',link:function(n,i,o,a){var u=document.createElement("label"),l=t.getCheckbox(n.elementName,o.ngModel,n.config);l=r.setValidationRules(l,n.config),u.appendChild(l),u.appendChild(document.createTextNode(n.label));var d=t.getCheckboxViewMode(n.label,o.ngModel),c=t.getWrapperElement({type:n.config.type,layout:n.config.layout,gridSize:n.config.gridSize});c.appendChild(u),c.appendChild(d),i.append(c);var m=angular.element(l);n.toggleErrorState=function(){a[n.elementName].$dirty&&a[n.elementName].$invalid?i.addClass("has-error"):i.removeClass("has-error")},m.bind("keyup",function(){n.toggleErrorState()}),e(i.contents())(n.$parent)}}}]),uiFormModule.directive("uiForm",["uiFormService","uiFormValidationService","$compile",function(e,t,r){return{restrict:"E",transclude:!0,replace:!0,controller:function(){},template:"<ng-form novalidate data-ng-transclude></ng-form>",link:function(r,n,i){n.addClass("ui-form"),r.formName=i.name,r.editMode=i.editMode,r.getErrorMessage=function(e){if("undefined"!=typeof this[this.formName][e]){var r=this[this.formName][e];return t.getValidationMessages(r,this.formName,e)}},r.getEditMode=function(){return e.getEditMode(this.editMode)},r.getCheckboxViewClass=function(t){return e.getCheckboxViewClass(t)},n.on("$destroy",function(){})}}}]),uiFormModule.directive("uiFormFieldset",[function(){return{restrict:"E",transclude:!0,replace:!0,require:"^form",template:"<fieldset data-ng-transclude></fieldset>",link:function(e,t,r){if("undefined"!=r.legend){var n=document.createElement("legend");n.appendChild(document.createTextNode(r.legend)),t.append(n)}}}}]),uiFormModule.directive("uiFormInputText",["$compile","uiFormService","uiFormValidationService",function(e,t,r){return{restrict:"E",transclude:!1,replace:!0,require:"^form",scope:{elementName:"@",label:"=",config:"=",message:"@"},template:'<div class="form-group"></div>',link:function(n,i,o,a){var u=t.getLabel({label:n.label,isRequired:n.config.isRequired,gridSize:n.config.labelGridSize});i.append(u);var l=t.getText(n.elementName,o.ngModel,n.config);l=r.setValidationRules(l,n.config);var d=t.getTextViewMode(o.ngModel),c=t.getWrapperElement({type:n.config.type,layout:n.config.layout,gridSize:n.config.valueGridSize});c.appendChild(l),c.appendChild(d),i.append(c);var m=angular.element(l);n.toggleErrorState=function(){a[n.elementName].$dirty&&a[n.elementName].$invalid?i.addClass("has-error"):i.removeClass("has-error")},m.bind("keyup",function(){n.toggleErrorState()}),e(i.contents())(n.$parent)}}}]),uiFormModule.factory("uiFormService",function(){return _getFormElement=function(e,t,r){var n=document.createElement("input");return n.setAttribute("type",r.type),n.setAttribute("name",e),n.setAttribute("data-ng-model",t),n},_setErrorPopover=function(e,t){return t.setAttribute("data-uib-popover","{{getErrorMessage('"+e+"')}}"),t.setAttribute("data-popover-placement","bottom"),t.setAttribute("data-popover-trigger","focus"),t.setAttribute("data-popover-enable","{{getEditMode()}}"),t},{getLabel:function(e){var t=document.createElement("label"),r="control-label";if("undefined"!=typeof e.gridSize&&(r+=" "+e.gridSize),t.setAttribute("class",r),"undefined"!=typeof e.label&&t.appendChild(document.createTextNode(e.label)),e.isRequired){t.setAttribute("data-ng-required","true");var n=document.createElement("sup"),i=document.createElement("span");i.setAttribute("class","glyphicon glyphicon-asterisk text-danger"),n.appendChild(i),t.appendChild(n)}return t},getText:function(e,t,r){var n=_getFormElement(e,t,r);return n.setAttribute("class","form-control"),n.setAttribute("placeholder",r.placeholder),n=_setErrorPopover(e,n)},getTextViewMode:function(e){var t=document.createElement("p");return t.setAttribute("class","form-control-static"),t.setAttribute("data-ng-bind",e),t.setAttribute("title","{{"+e+"}}"),t},getTextarea:function(e,t,r){var n=_getFormElement(e,t,r);return n.setAttribute("class","form-control"),n.setAttribute("placeholder",r.placeholder),n},getTextareaViewMode:function(e){return this.getTextViewMode(e)},getCheckbox:function(e,t,r){var n=_getFormElement(e,t,r);return n},getCheckboxViewMode:function(e,t){var r=document.createElement("p");return r.setAttribute("class","form-control-static"),r.appendChild(document.createTextNode(e)),r.setAttribute("title","{{"+t+"}}"),r.setAttribute("data-ng-class","getCheckboxViewClass("+t+")"),r},getCheckboxViewClass:function(e){var t="";return e||(t="hide"),t},getRadio:function(e,t,r){var n=_getFormElement(e,t,r);return n},getRadioViewMode:function(e){return document.createTextNode("TODO radio view mode")},getSelect:function(e,t,r){var n=_getFormElement(e,t,r);return n},getWrapperElement:function(e){var t=document.createElement("div"),r="";switch(e.type){case"checkbox":r="checkbox","undefined"!=typeof e.layout&&"inline"==e.layout&&(r+="-inline");break;case"radio":r="radio",void 0!==typeof e.layout&&"inline"==e.layout&&(r+="-inline");break;case"input":case"textarea":case"select":}return t.setAttribute("class",r+" "+e.gridSize),t},getEditMode:function(e){return"undefined"==typeof e||"false"==e?!1:!0}}}),uiFormModule.factory("uiFormValidationService",["$http",function(e){var t={};e.get("validationMessages.bundle.json").then(function(e){t=e.data});var r=function(e){e.setAttribute("data-ng-required","true")},n=function(e,t){e.setAttribute("data-ng-minlength",t)},i=function(e,t){e.setAttribute("data-ng-maxlength",t)},o=function(e,t){e.setAttribute("min",t)},a=function(e,t){e.setAttribute("max",t)},u=function(e,t){e.setAttribute("data-ng-pattern",t)};return{setValidationRules:function(e,t){return 1==t.isRequired&&r(e),"undefined"!=typeof t.minlength&&t.minlength>0&&n(e,t.minlength),"undefined"!=typeof t.maxlength&&t.maxlength>0&&i(e,t.maxlength),"undefined"!=typeof t.min&&o(e,t.min),"undefined"!=typeof t.max&&a(e,t.max),t.pattern&&u(e,t.pattern),e},getValidationMessages:function(e,r,n){var i="✔";if("undefined"==typeof e||e.$valid||e.$pristine)return i;if("undefined"==typeof r||"undefined"==typeof n)return i;if("undefined"==typeof document.getElementsByName(r))return i;if("undefined"==typeof document.getElementsByName(n))return i;var o=document.getElementsByName(r)[0].querySelectorAll("*[name="+n+"]");return i="✘",e.$error.required&&(i+=" -"+t.required),e.$error.number&&(i+=" -"+t.number),e.$error["boolean"]&&(i+=" -"+t["boolean"]),e.$error.date&&(i+=" -"+t.date),e.$error.minlength&&(i+=" -"+t.minlength.replace("%1%",o[0].getAttribute("data-ng-minlength"))),e.$error.maxlength&&(i+=" -"+t.maxlength.replace("%1%",o[0].getAttribute("data-ng-maxlength"))),e.$error.min&&(i+=" -"+t.min.replace("%1%",o[0].getAttribute("min"))),e.$error.max&&(i+=" -"+t.max.replace("%1%",o[0].getAttribute("max"))),e.$error.pattern&&(i+=" -"+t.pattern),i}}}]);